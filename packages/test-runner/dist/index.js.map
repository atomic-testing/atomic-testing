{"version":3,"file":"index.js","names":["_url: string","testSuiteInfo: TestSuiteInfo<T> | TestSuiteInfo<T>[]","testMethod: TestFrameworkMapper","interactionInterface: InteractionInterface<T>","suites: TestSuiteInfo<T>[]","done: Function | undefined","parameters: E2eTestRunEnvironmentFixture | undefined"],"sources":["../src/testRunner.ts"],"sourcesContent":["import { ScenePart } from '@atomic-testing/core';\n\nimport { E2eTestRunEnvironmentFixture, InteractionInterface, TestFrameworkMapper, TestSuiteInfo } from './types';\n\nexport const emptyGoto = (_url: string) => {};\n\nexport function testRunner<T extends ScenePart>(\n  testSuiteInfo: TestSuiteInfo<T> | TestSuiteInfo<T>[],\n  testMethod: TestFrameworkMapper,\n  interactionInterface: InteractionInterface<T>\n) {\n  const suites: TestSuiteInfo<T>[] = Array.isArray(testSuiteInfo) ? testSuiteInfo : [testSuiteInfo];\n  const { getTestEngine } = interactionInterface;\n  suites.forEach(suite => {\n    const { title, tests, url } = suite;\n    testMethod.describe(title ?? '', () => {\n      // @ts-ignore\n      testMethod.beforeEach(function ({ page: _page }) {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-function-type\n        let done: Function | undefined = undefined;\n        let parameters: E2eTestRunEnvironmentFixture | undefined = undefined;\n\n        const passIn = arguments[0];\n        if (typeof passIn === 'function') {\n          done = passIn;\n        } else {\n          parameters = passIn;\n        }\n\n        if ('goto' in interactionInterface) {\n          const cb = interactionInterface.goto(url, parameters);\n          if (cb instanceof Promise) {\n            return cb.finally(() => {\n              done?.();\n            });\n          } else {\n            return done?.();\n          }\n        }\n        return done?.();\n      });\n\n      tests(getTestEngine, testMethod);\n    });\n  });\n}\n"],"mappings":";;AAIA,MAAa,YAAY,CAACA,SAAiB,CAAE;AAE7C,SAAgB,WACdC,eACAC,YACAC,sBACA;CACA,MAAMC,SAA6B,MAAM,QAAQ,cAAc,GAAG,gBAAgB,CAAC,aAAc;CACjG,MAAM,EAAE,eAAe,GAAG;AAC1B,QAAO,QAAQ,WAAS;EACtB,MAAM,EAAE,OAAO,OAAO,KAAK,GAAG;AAC9B,aAAW,SAAS,SAAS,IAAI,MAAM;AAErC,cAAW,WAAW,SAAU,EAAE,MAAM,OAAO,EAAE;IAE/C,IAAIC;IACJ,IAAIC;IAEJ,MAAM,SAAS,UAAU;AACzB,eAAW,WAAW,WACpB,QAAO;QAEP,cAAa;AAGf,QAAI,UAAU,sBAAsB;KAClC,MAAM,KAAK,qBAAqB,KAAK,KAAK,WAAW;AACrD,SAAI,cAAc,QAChB,QAAO,GAAG,QAAQ,MAAM;AACtB,cAAQ;KACT,EAAC;SAEF,QAAO,QAAQ;IAElB;AACD,WAAO,QAAQ;GAChB,EAAC;AAEF,SAAM,eAAe,WAAW;EACjC,EAAC;CACH,EAAC;AACH"}